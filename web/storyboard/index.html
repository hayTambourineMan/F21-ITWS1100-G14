<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Do ITWS</title>
    <meta charset="utf-8">
    <link href="../resources/style.css" rel= "stylesheet" type= "text/css"/>
    <a href= "index.html">
      <img src="../resources/Logo.png" alt= "Logo" height="100px" width="100px">
    </a>
  </head>

  <body id = "home">
    <div id="mySidenav" class="sidenav">
      <a href="index.html" id="index">Do ITWS</a>
      <a href="me.html" id="me">Me</a>
      <a href="task.html" id="task">Add Task</a>
      <a href="../welcome.html" id="logout">Logout</a>
    </div>

    <section id="main">
      <h1>Do It With Style!</h1>
      <table id="taskTable">
      </table>
    </section>

    <!-- Footer -->
    <div class="footer">
      <p>
        <a href="index.html">Home</a> |
        <a href="https://github.com/hayTambourineMan/F21-ITWS1100-G14">About Us</a> |
        <a href="https://github.com/hayTambourineMan/F21-ITWS1100-G14">Contact Us</a> |
        <a href="https://github.com/hayTambourineMan/F21-ITWS1100-G14/blob/main/.github/SECURITY.md">Security</a>
      </p>
    </div>

    <!-- Output Local Stroage -->
    <script>
      let storage = window.localStorage;
      function deleteRow(name) {
        delete storage[name];
        location.reload();
      }
      let tasklst = "";
      for (task in storage) {
        if (task == "length" || task == "clear" || task == "getItem" || task == "key" || task == "removeItem" || task == "setItem") continue;
        tasklst += "<tr><th>" + task + "</th><th>" + (JSON.parse(storage[task])[0] ? "<img width=50 height=50 src='../resources/!.png' />" : "") + "</th><th>" + JSON.parse(storage[task])[1] + "<th/><th>" + JSON.parse(storage[task])[2] + "<th/><button class='deleteButt' onclick='deleteRow(" +'"' + task + '"' + ")'>DELETE</button></tr>";
      }
      document.getElementById('taskTable').innerHTML = tasklst;
    </script>

  </body>
</html>